<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Solution · Quantized System Solver</title><meta name="title" content="Solution · Quantized System Solver"/><meta property="og:title" content="Solution · Quantized System Solver"/><meta property="twitter:title" content="Solution · Quantized System Solver"/><meta name="description" content="Documentation for Quantized System Solver."/><meta property="og:description" content="Documentation for Quantized System Solver."/><meta property="twitter:description" content="Documentation for Quantized System Solver."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Quantized System Solver logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Quantized System Solver</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../../guide/userTutorial/">Tutorial</a></li><li><a class="tocitem" href="../../guide/userAPI/">User API</a></li></ul></li><li><span class="tocitem">Background</span><ul><li><a class="tocitem" href="../../background/introductoryResources/">Introduction to Quantized System Methods</a></li><li><a class="tocitem" href="../../background/qss/">Quantized State System Methods</a></li><li><a class="tocitem" href="../../background/liqss/">Linearly Implicit Quantized State System Methods</a></li><li><a class="tocitem" href="../../background/mliqss/">Modified Linearly Implicit Quantized State System Methods</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/linearTimeInvariantSystem/">Linear Time Invariant</a></li><li><a class="tocitem" href="../../examples/linearTimeInvariantSystemEvents/">Linear Time Invariant with events</a></li><li><a class="tocitem" href="../../examples/vanderpol/">Van der Pol</a></li><li><a class="tocitem" href="../../examples/tysonModel/">The Tyson Model</a></li><li><a class="tocitem" href="../../examples/adr/">ADR problem</a></li><li><a class="tocitem" href="../../examples/dosing/">Conditional Dosing in Pharmacometrics</a></li></ul></li><li><span class="tocitem">Developer resources</span><ul><li><a class="tocitem" href="../devIntro/">Developer Guide</a></li><li><a class="tocitem" href="../problem/">Problem</a></li><li><a class="tocitem" href="../algorithm/">QSS Algorithms</a></li><li><a class="tocitem" href="../solve/">Solve</a></li><li><a class="tocitem" href="../integrator/">Integrators</a></li><li><a class="tocitem" href="../quantizer/">Quantizer</a></li><li class="is-active"><a class="tocitem" href>Solution</a><ul class="internal"><li><a class="tocitem" href="#Problem-extension"><span>Problem extension</span></a></li><li><a class="tocitem" href="#Define-and-create-a-solution"><span>Define and create a solution</span></a></li><li><a class="tocitem" href="#Further-reading"><span>Further reading</span></a></li></ul></li><li><a class="tocitem" href="../taylor/">Taylor Variables</a></li><li><a class="tocitem" href="../utils/">Utils references</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developer resources</a></li><li class="is-active"><a href>Solution</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Solution</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mongibellili/QuantizedSystemSolver.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mongibellili/QuantizedSystemSolver.jl/blob/main/docs/src/developer/solution.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Solution"><a class="docs-heading-anchor" href="#Solution">Solution</a><a id="Solution-1"></a><a class="docs-heading-anchor-permalink" href="#Solution" title="Permalink"></a></h1><p>This is where the results of the simulation are stored, including: Settings, Time points (times[]), Variables (vars[]), Statistics (stats).</p><h2 id="Problem-extension"><a class="docs-heading-anchor" href="#Problem-extension">Problem extension</a><a id="Problem-extension-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-extension" title="Permalink"></a></h2><p>The Solution entity can be extended by subclassing:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantizedSystemSolver.Sol" href="#QuantizedSystemSolver.Sol"><code>QuantizedSystemSolver.Sol</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Sol{T,O}</code></pre><p>This is a superclass for all QSS solutions. It is parametric on:</p><ul><li>The number of continuous variables T</li><li>The order of the algorithm O</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mongibellili/QuantizedSystemSolver.jl/blob/d2a0dd4ba17cafa310d740e0b506f9a0c279e3bf/src/commonQSS/qssAbstractTypes.jl#L21-L27">source</a></section></article><h3 id="What-is-needed-with-a-new-Solution:"><a class="docs-heading-anchor" href="#What-is-needed-with-a-new-Solution:">What is needed with a new Solution:</a><a id="What-is-needed-with-a-new-Solution:-1"></a><a class="docs-heading-anchor-permalink" href="#What-is-needed-with-a-new-Solution:" title="Permalink"></a></h3><p>Extending a solution is easier than extending the Problem and the Algorithm. Some cases are presented as follows:</p><ul><li>Creating a new feature: no extra work is needed except the feature itself.</li><li>Creating a new solution similar to the LightSol: no extra work is needed except the definition of the new type subclassing Sol.</li><li>Creating a solution that differs from the LightSol: extend all functions that refer to fields that do not exist in the new type.</li></ul><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><pre><code class="language-julia hljs">struct HeavySol{T,O}&lt;:Sol{T,O}
  size::Val{T}
  order::Val{O}
  savedTimes::Vector{Vector{Float64}}
  savedVars::Vector{Vector{Taylor0}}
end</code></pre><p>Here, the heavy solution contains all variables and their derivatives. The <code>evaluateSol</code> function can be reimplemented to use the derivatives for interpolation.</p><h2 id="Define-and-create-a-solution"><a class="docs-heading-anchor" href="#Define-and-create-a-solution">Define and create a solution</a><a id="Define-and-create-a-solution-1"></a><a class="docs-heading-anchor-permalink" href="#Define-and-create-a-solution" title="Permalink"></a></h2><p>An implemented concrete solution type is: </p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantizedSystemSolver.LightSol" href="#QuantizedSystemSolver.LightSol"><code>QuantizedSystemSolver.LightSol</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LightSol{T,O}</code></pre><p>A struct that holds the solution of a system of ODEs. It has the following fields:</p><ul><li><code>size:</code> The number of continuous variables T</li><li><code>order:</code> The order of the algorithm O</li><li><code>savedTimes:</code> A vector of vectors of Float64 that holds the times at which the continuous variables were saved</li><li><code>savedVars:</code> A vector of vectors of Float64 that holds the values of the continuous variables at the times they were saved</li><li><code>algName:</code> The name of the algorithm used to solve the system</li><li><code>sysName:</code> The name of the system</li><li><code>absQ:</code> The absolute tolerance used in the simulation</li><li><code>stats:</code> A Stats struct that holds the statistics of the simulation</li><li><code>ft:</code> The final time of the simulation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mongibellili/QuantizedSystemSolver.jl/blob/d2a0dd4ba17cafa310d740e0b506f9a0c279e3bf/src/solution/solution.jl#L17-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantizedSystemSolver.createSol-Union{Tuple{O}, Tuple{T}, Tuple{Val{T}, Val{O}, Vector{Vector{Float64}}, Vector{Vector{Float64}}, String, String, Float64, Stats, Float64}} where {T, O}" href="#QuantizedSystemSolver.createSol-Union{Tuple{O}, Tuple{T}, Tuple{Val{T}, Val{O}, Vector{Vector{Float64}}, Vector{Vector{Float64}}, String, String, Float64, Stats, Float64}} where {T, O}"><code>QuantizedSystemSolver.createSol</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">createSol(::Val{T}, ::Val{O}, savedTimes::Vector{Vector{Float64}}, savedVars::Vector{Vector{Float64}}, solver::String, nameof_F::String, absQ::Float64, stats::Stats, ft::Float64) where {T,O}</code></pre><p>Creates a LightSol struct with the given parameters.</p><p><strong>Arguments</strong></p><ul><li><code>::Val{T}</code>: The number of continuous variables.</li><li><code>::Val{O}</code>: The order of the algorithm.</li><li><code>savedTimes::Vector{Vector{Float64}}</code>: A vector of vectors of times at which the continuous variables were saved.</li><li><code>savedVars::Vector{Vector{Float64}}</code>: A vector of vectors of values of the continuous variables at the times they were saved.</li><li><code>solver::String</code>: The name of the algorithm used to solve the system.</li><li><code>nameof_F::String</code>: The name of the system.</li><li><code>absQ::Float64</code>: The absolute tolerance used in the simulation.</li><li><code>stats::Stats</code>: A Stats struct that holds the statistics of the simulation.</li><li><code>ft::Float64</code>: The final time of the simulation.</li></ul><p><strong>Returns</strong></p><ul><li>A LightSol struct.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mongibellili/QuantizedSystemSolver.jl/blob/d2a0dd4ba17cafa310d740e0b506f9a0c279e3bf/src/solution/solution.jl#L41-L59">source</a></section></article><h2 id="Further-reading"><a class="docs-heading-anchor" href="#Further-reading">Further reading</a><a id="Further-reading-1"></a><a class="docs-heading-anchor-permalink" href="#Further-reading" title="Permalink"></a></h2><p><strong>The solution Struct</strong> The LightSol struct is specifically designed to hold the solution of a system of ODEs. It contains several fields, including size and order, which denote the number of continuous variables and the order of the algorithm used, respectively. The savedTimes and savedVars fields are vectors that store the time steps and corresponding values of the continuous variables at which they were recorded during the simulation. Other fields include algName and sysName, which specify the names of the algorithm and system being solved, alongside absQ, the absolute tolerance used during the simulation. The stats field contains an instance of the Stats struct, providing access to the performance metrics, while ft holds the final time of the simulation. The Stats struct includes fields for totalSteps, which counts the total number of steps taken throughout the simulation, simulStepCount, representing the number of simultaneous updates during the simulation, and evCount, which tallies the number of events that occurred. Additionally, the numSteps vector keeps track of the number of steps taken for each continuous variable involved in the simulation, allowing for detailed analysis of the performance for individual components.</p><p>The functions defined in conjunction with these structs enable various operations related to the simulation&#39;s solutions. The createSol function initializes a LightSol instance with the specified parameters, while the getindex function provides a helper to access either the saved times or variables easily. The evaluateSol function allows for the evaluation of the solution at a specified time, supporting linear interpolation between saved points. Furthermore, the solInterpolated functions enable the generation of interpolated solutions across specified intervals, creating new solution objects based on the interpolated values and times. The show function is tailored to present the statistics in a user-friendly format, offering insights into the performance of the simulation. Overall, these constructs provide a robust framework for managing and analyzing the outcomes of simulations involving ODEs.</p><p><strong>Plotting the Solution:</strong> The plotSol function is designed to visually represent the solution of a system of ODEs stored in the solution object. It accepts a variety of optional parameters, allowing users to customize their plots significantly. The function takes in a solution object sol along with indices for the variables to be plotted (xvars). Users can also specify a title, axis limits (xlims and ylims), and visual styles, such as marker types and whether to display a legend. If a title is not provided, it defaults to a composite of various parameters, including the system name, algorithm name, absolute tolerance, total steps taken, and more.Within the function, each selected variable is plotted against its corresponding saved time, utilizing different line styles for better distinction. If no specific variables are selected, all variables in the solution are plotted by default. After constructing the plot, the function checks for specified axis limits and applies them accordingly. Finally, the function returns the plot object, which can be further modified or saved. In addition to basic plotting, the saveSol function allows users to save their plots as PNG files, automatically generating filenames based on relevant parameters and timestamps. This functionality is crucial for documentation and sharing results in a reproducible manner. This comprehensive plotting capability ensures that users can effectively visualize the behavior of their systems, making the analysis of results intuitive and informative.</p><p><strong>Finding the Error:</strong> The getError function computes the relative error of a solution compared to a specified reference function, enabling users to assess the accuracy of their numerical results. The function iterates over the saved time points, and it calculates the sum of the squares of the differences between the numerical solution and the true values provided by the reference function, as well as the sum of the squares of the true values. The relative error is then derived as the square root of the ratio of these sums, providing a quantitative measure of the solution&#39;s deviation from the expected results. This comprehensive error analysis is essential for validating the performance of numerical methods and ensuring that the solutions produced are both reliable and precise. By comparing the numerical results to known reference values, users can gain insights into the accuracy and effectiveness of the solver, enabling them to make informed decisions about their simulations and analyses.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quantizer/">« Quantizer</a><a class="docs-footer-nextpage" href="../taylor/">Taylor Variables »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Thursday 12 December 2024 14:04">Thursday 12 December 2024</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
